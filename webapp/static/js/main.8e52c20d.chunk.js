(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{163:function(e,t,a){e.exports=a(302)},169:function(e,t,a){},177:function(e,t){},179:function(e,t){},212:function(e,t){},213:function(e,t){},281:function(e,t){},294:function(e,t,a){},300:function(e,t,a){},301:function(e,t,a){},302:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(27),s=a.n(o),l=(a(168),a(169),a(8)),c=a(162),i=a(49),u=a(29),m=a.n(u),g=a(50),d=a(149),h=a(24),p=a(25),f=a(51),b=a(38),S=a(39),E=a(309),v=a(308),y=a(307),T=a(305),j=a(155),O=a(306),k=a(70),w=a.n(k),C=a(151),M=a.n(C),R=a(152),F=a.n(R),N=a(153),x=a.n(N),I=a(53),V=a.n(I),_=new(function(){function e(){Object(h.a)(this,e)}return Object(p.a)(e,[{key:"configs",value:function(){return{appurl:"http://107.180.106.82:6010/"}}},{key:"session",value:function(){var e=Object(g.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.configs(),e.next=3,fetch(t.appurl+"geoportal/logged",{method:"POST",body:JSON.stringify({email:localStorage.getItem("email"),salt:localStorage.getItem("salt")}),headers:{"Content-Type":"application/json"}});case 3:return a=e.sent,e.next=6,a.json();case 6:if(!(n=e.sent)){e.next=11;break}return e.abrupt("return",n);case 11:return e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"auth",value:function(e,t){var a=[];if(e.length>0)for(var n=0;n<e.length;n++)t===e[n].codigo_recurso&&a.push(e[n].codigo_recurso);return a}}]),e}()),P=(a(294),function(e){Object(S.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(d.a)({},e.target.name,e.target.value))},n.handleSubmit=function(){var e=Object(g.a)(m.a.mark((function e(t){var a,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),t.target.checkValidity()){e.next=4;break}return n.setState({setValidated:!0}),e.abrupt("return");case 4:n.setState({setValidated:!1}),a=x()(F.a.generate()+Date.now()).toString(),localStorage.setItem("email",n.state.email),localStorage.setItem("salt",a),o={email:n.state.email,password:n.state.password,salt:a},fetch(n.config.appurl+"geoportal/dologin",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then(n.setState({setToast:!0,messageToast:r.a.createElement(w.a,{size:28,color:"#2a3850"}),classToast:"toastMsg alert alert-primary"})).then((function(e){e.error?n.setState({setToast:!0,messageToast:V()(e.message),classToast:"toastMsg alert alert-danger"}):(n.setState({setToast:!0,messageToast:r.a.createElement("span",null,V()(e.message)," ",r.a.createElement("br",null),r.a.createElement("br",null)," ",r.a.createElement(w.a,{size:28,color:"green"})),classToast:"toastMsg alert alert-success",logged:!0}),console.log(e),localStorage.setItem("nome",e.nome))}),(function(e){console.log(e),n.setState({setToast:!0,messageToast:"Ocorreu um erro: "+e,classToast:"toastMsg alert alert-danger"})}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleRecSenhaSubmit=function(){var e=Object(g.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),t.target.checkValidity()){e.next=4;break}return n.setState({setRecValidated:!0}),e.abrupt("return");case 4:n.setState({setRecValidated:!1}),a={email_recuperacao:n.state.email_recuperacao},fetch(n.config.appurl+"admin/usuarios/recuperarsenha",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then(n.setState({alertMessageStatus:!0,alertMessage:r.a.createElement(w.a,{size:28,color:"#2a3850"}),alertType:"primary"})).then((function(e){e.error?n.setState({alertMessageStatus:!0,alertMessage:V()(e.message),alertType:"danger"}):(n.setState({alertMessageStatus:!0,alertMessage:V()(e.message),alertType:"success"}),setTimeout((function(){n.setState({alertMessageStatus:!1})}),3e3))}),(function(e){n.setState({alertMessageStatus:!0,alertMessage:"Ops aconteceu um erro na opera\xe7\xe3o: "+e,alertType:"danger"})}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.openFormRecSenha=function(e){n.setState({openFormRecSenhaAction:e})},n.closeToast=function(){n.setState({setToast:!1})},n.closeAlertMessage=function(){n.setState({alertMessageStatus:!1})},n.handleChange=n.handleChange.bind(Object(f.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(f.a)(n)),n.state={logged:!1,setToast:!1,messageToast:"",classToast:"",setValidated:!1,setRecValidated:!1,email:"",password:"",openFormRecSenhaAction:!1,alertType:"primary",alertMessageStatus:!1,alertMessage:""},n.config=_.configs(),n}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return this.state.logged?r.a.createElement(l.a,{push:!0,to:"/app"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{onClose:function(){return e.closeToast()},show:this.state.setToast,delay:5e3,autohide:!0,className:this.state.classToast},r.a.createElement(E.a.Header,null,r.a.createElement("strong",{className:"mr-auto"},"Mensagem")),r.a.createElement(E.a.Body,null,r.a.createElement("strong",null,this.state.messageToast," "))),r.a.createElement(M.a,{images:["/sjr3.jpg","/sjr1.jpg"],duration:5,transition:2}),r.a.createElement("section",{className:"container-fluid p-2"},r.a.createElement("form",{onSubmit:this.handleSubmit,noValidate:!0,className:this.state.setValidated?"form-signin text-center is-invalid was-validated form-control:invalid":"form-signin text-center"},r.a.createElement("img",{src:"/logo.png",alt:"Logo SJR",width:"111",height:"164",className:"mb-4 d-inline-block align-center"}),r.a.createElement("h2",{className:"h3 mb-3 font-weight-normal"},"Geoportal de ITBI"),r.a.createElement("input",{type:"email",className:"form-control",name:"email",value:this.state.value,onChange:this.handleChange,placeholder:"Email do Usu\xe1rio",required:!0}),r.a.createElement(v.a.Control.Feedback,{type:"invalid"},"Por favor insira um email v\xe1lido"),r.a.createElement("input",{type:"password",id:"inputPassword",className:"form-control",name:"password",value:this.state.value,onChange:this.handleChange,placeholder:"Senha do Usu\xe1rio",required:!0}),r.a.createElement(v.a.Control.Feedback,{type:"invalid"},"Insira sua senha de usu\xe1rio"),r.a.createElement("hr",null),r.a.createElement("div",{className:"checkbox mb-3 mt-1"},r.a.createElement("p",null,r.a.createElement("a",{className:"text-blue",href:"#per",onClick:function(){return e.openFormRecSenha(!e.state.openFormRecSenhaAction)}},"Pedeu a senha?"))),r.a.createElement("button",{className:"btn btn-lg btn-danger btn-block",type:"submit"},"Acessar"),r.a.createElement("hr",null),r.a.createElement("p",null,"\xa9 ",(new Date).getFullYear()," - Prefeitura Municipal de S\xe3o Jos\xe9 de Ribamar |",r.a.createElement("a",{href:"http://tecgeobr.com.br",rel:"noopener noreferrer",target:"_blank"}," Desenvolvimento Tecgeo"),"."))),r.a.createElement(y.a,{show:this.state.openFormRecSenhaAction,onHide:function(){return e.openFormRecSenha(!e.state.openFormRecSenhaAction)},backdrop:"static",keyboard:!0},r.a.createElement(y.a.Header,{closeButton:!0},r.a.createElement(y.a.Title,null,"Recuperar Senha")),r.a.createElement(y.a.Body,null,r.a.createElement(v.a,{onSubmit:function(t){return e.handleRecSenhaSubmit(t)},noValidate:!0,className:this.state.setRecValidated?"is-invalid was-validated form-control:invalid":""},r.a.createElement(T.a,{variant:this.state.alertType,show:this.state.alertMessageStatus,onClose:function(){return e.closeAlertMessage()},dismissible:!0},this.state.alertMessage),r.a.createElement(v.a.Row,null,r.a.createElement(j.a,null,r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"Email do Usu\xe1rio"),r.a.createElement(v.a.Control,{type:"email",placeholder:"Insira o email do usu\xe1rio",name:"email_recuperacao",value:this.state.email_recuperacao||"",onChange:this.handleChange,required:!0}),r.a.createElement(v.a.Control.Feedback,{type:"invalid"},"Insira o email do usu\xe1rio que deseja recuperar a senha")))),r.a.createElement(O.a,{variant:"danger",type:"submit",block:!0},"Recuperar"))),r.a.createElement(y.a.Footer,null,r.a.createElement(O.a,{variant:"secondary",onClick:function(){return e.openFormRecSenha(!e.state.openFormRecSenhaAction)}},"Fechar"))))}}]),a}(r.a.Component)),A=(a(300),a(161)),B=a.n(A),J=function(e){Object(S.a)(a,e);var t=Object(b.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"loading__centered"},r.a.createElement("div",{className:"loading__logo"},r.a.createElement(B.a,{size:22,color:"#fafafa"}))))}}]),a}(r.a.Component),D=(a(301),function(e){Object(S.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={logged:"loading"},n.config=_.configs(),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch(this.config.appurl+"geoportal/logged",{method:"POST",body:JSON.stringify({email:localStorage.getItem("email"),salt:localStorage.getItem("salt")}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then(this.setState({logged:"loading"})).then((function(t){t.error?(e.setState({logged:"no"}),localStorage.clear()):e.setState({logged:"yes"})}))}},{key:"componentWillUnmount",value:function(){this.setState=function(e,t){}}},{key:"render",value:function(){var e;return e="yes"===this.state.logged?r.a.createElement("iframe",{title:"GeoITBI",frameBorder:"0",allowtransparency:"yes",scrolling:"no",src:"/webapp/index.html",width:"100%",height:"100%"}):"loading"===this.state.logged?r.a.createElement(J,null):r.a.createElement(l.a,{push:!0,to:"/"}),r.a.createElement(r.a.Fragment,null,e)}}]),a}(r.a.Component)),q=a(93);function z(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{bg:"light",variant:"light"},r.a.createElement(q.a.Brand,{href:"/"},r.a.createElement("img",{src:"/logo.png",alt:"Logo PMSJR",width:"32",height:"42",className:"d-inline-block align-center"})," ","Geoportal de ITBI | 404 Ops P\xe1gina n\xe3o encontrada..")))}var G=function(){return r.a.createElement(i.a,null,r.a.createElement(l.d,null,r.a.createElement(l.b,{component:P,exact:!0,path:"/"}),r.a.createElement(l.b,{component:D,exact:!0,path:"/app"}),r.a.createElement(l.b,{component:z,exact:!0,path:"*"})))},U=Object(c.a)();var H=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.c,{history:U},r.a.createElement(G,null)))};s.a.render(r.a.createElement(H,null),document.getElementById("root"))}},[[163,1,2]]]);
//# sourceMappingURL=main.8e52c20d.chunk.js.map